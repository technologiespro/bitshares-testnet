{"version":3,"file":"existing-account.30f2b787644e7ef8f67e.js","sources":["webpack:///existing-account.30f2b787644e7ef8f67e.js"],"sourcesContent":["(this.webpackJsonp=this.webpackJsonp||[]).push([[1],{2071:function(e,t,n){\"use strict\";var a=n(0),r=n.n(a),o=n(30),i=n(9),c=n.n(i),l=n(3),s=n.n(l),u=n(5),p=n.n(u),f=n(41),m=n(108),h=n(304),y=n(599),_=n(411),d=n(35),b=n(2),v=n.n(b),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function k(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function E(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var w=function(e){function t(){return k(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),g(t,[{key:\"componentWillReceiveProps\",value:function(e){e.claim_account_name&&this.onClaimAccount(e.claim_account_name,e.checked)}},{key:\"render\",value:function(){var e=this;if(void 0===this.props.balances||!this.props.total_by_account_asset.size)return r.a.createElement(\"div\",null);var t=-1;return r.a.createElement(\"div\",null,r.a.createElement(\"table\",{className:\"table\"},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null),r.a.createElement(\"th\",{style:{textAlign:\"center\"}},r.a.createElement(v.a,{content:\"wallet.unclaimed\"})),r.a.createElement(\"th\",{style:{textAlign:\"center\"}},r.a.createElement(v.a,{content:\"wallet.unclaimed_vesting\"})),r.a.createElement(\"th\",{style:{textAlign:\"center\"}},r.a.createElement(v.a,{content:\"account.name\"})))),r.a.createElement(\"tbody\",null,this.props.total_by_account_asset.map((function(n,a){return r.a.createElement(\"tr\",{key:++t},r.a.createElement(\"td\",null,r.a.createElement(\"input\",{type:\"checkbox\",checked:!!e.props.checked.get(t),onChange:e.onCheckbox.bind(e,t,n.balances)})),r.a.createElement(\"td\",{style:{textAlign:\"right\"}},n.unclaimed?r.a.createElement(d.a,{color:\"info\",amount:n.unclaimed,asset:a.get(1)}):null),r.a.createElement(\"td\",{style:{textAlign:\"right\"}},n.vesting.unclaimed?r.a.createElement(\"div\",null,r.a.createElement(d.a,{color:\"info\",amount:n.vesting.unclaimed,hide_asset:!0,asset:a.get(1)}),r.a.createElement(\"span\",null,\" of \"),r.a.createElement(d.a,{color:\"info\",amount:n.vesting.total,asset:a.get(1)})):null),r.a.createElement(\"td\",null,\" \",a.get(0),\" \"))})).toArray())))}},{key:\"onCheckbox\",value:function(e,t){var n=this.props.checked;n=n.get(e)?n.delete(e):n.set(e,t),_.a.setSelectedBalanceClaims(n)}},{key:\"onClaimAccount\",value:function(e,t){if(!t.size){var n=-1;this.props.total_by_account_asset.forEach((function(a,r){n++,r.get(0)===e&&(a.unclaimed||a.vesting.unclaimed)&&(t=t.set(n,a.balances))})),t.size&&_.a.setSelectedBalanceClaims(t)}}}]),t}(a.Component),O=w=Object(o.a)(w,{listenTo:function(){return[y.a]},getProps:function(){var e=y.a.getState(),t=e.balances,n=e.address_to_pubkey,a=m.a.getState().keys,r=c.a.Map().asMutable();return t&&(e.total_by_account_asset=t.groupBy((function(e){var t=\"\",o=n.get(e.owner),i=a.get(o);i&&i.import_account_names&&(t=i.import_account_names.join(\", \"));var l,s,u,p=Math.ceil((l=c.a.List([t,e.balance.asset_id]),s=e.owner,(u=r.get(l))||(u=c.a.Set().asMutable(),r.set(l,u)),u.add(s),u.size/60));return c.a.List([t,e.balance.asset_id,p])})).map((function(e){return e.reduce((function(e,t){return t.public_key_string=n.get(t.owner),e.balances=e.balances.add(t),null!=t.vested_balance?(e.vesting.unclaimed+=Number(t.vested_balance.amount),e.vesting.total+=Number(t.balance.amount)):e.unclaimed+=Number(t.balance.amount),e}),{unclaimed:0,vesting:{unclaimed:0,total:0},balances:c.a.Set()})})).sortBy((function(e){return e}))),e}}),C=n(66),S=n(23),j=n(44),x=n(202),P=n(48),A=n(1),N=n.n(A),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function B(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function I(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var K=function(e){function t(){return B(this,t),I(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),T(t,[{key:\"render\",value:function(){var e=this.props.accounts.filter((function(e){return!!e})).filter((function(e){return S.a.isMyAccount(e)})).map((function(e){return e.get(\"name\")})).sort();return r.a.createElement(\"span\",null,r.a.createElement(x.a,{onChange:this.onAccountSelect.bind(this),account_names:e,center:!0}))}},{key:\"onAccountSelect\",value:function(e){this.props.onChange(e)}}]),t}(a.Component);K.propTypes={accounts:j.a.ChainAccountsList.isRequired,onChange:N.a.func.isRequired};var R=Object(P.a)(K),z=n(4),M=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function W(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function D(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var q=function(e){function t(){return W(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),M(t,[{key:\"componentWillMount\",value:function(){var e=m.a.getState().keys.keySeq();_.a.setPubkeys(e),this.existing_keys=e}},{key:\"componentWillReceiveProps\",value:function(e){var t=m.a.getState().keys.keySeq();t.equals(this.existing_keys)||(this.existing_keys=t,_.a.setPubkeys(t))}},{key:\"render\",value:function(){if(!this.props.account_refs.size)return r.a.createElement(\"div\",null,r.a.createElement(\"h5\",null,r.a.createElement(v.a,{content:\"wallet.no_balance\"})));if(this.props.loading)return r.a.createElement(\"div\",null,r.a.createElement(\"br\",null),r.a.createElement(\"h5\",null,r.a.createElement(v.a,{content:\"wallet.loading_balances\"}),\"â€¦\"),r.a.createElement(\"br\",null),r.a.createElement(f.a,{type:\"three-bounce\"}));if(!this.props.balances||!this.props.balances.size)return r.a.createElement(\"div\",null,r.a.createElement(\"br\",null),r.a.createElement(\"h5\",null,r.a.createElement(v.a,{content:\"wallet.no_balance\"})));var e=this.props.selected_balances.size&&this.props.claim_account_name,t=e?\" (\"+this.props.claim_account_name+\")\":null;return r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:\"content-block center-content\"},r.a.createElement(\"h3\",{className:\"no-border-bottom\"},r.a.createElement(v.a,{content:\"wallet.claim_balances\"}))),r.a.createElement(\"div\",{className:\"grid-block vertical\"},r.a.createElement(\"div\",{className:\"grid-content\",style:{overflowY:\"hidden !important\"}},r.a.createElement(\"div\",{className:\"full-width-content center-content\"},r.a.createElement(R,{key:this.props.balances,accounts:c.a.List(this.props.account_refs),onChange:this.onClaimAccountChange.bind(this)})),r.a.createElement(\"br\",null)),r.a.createElement(\"br\",null),r.a.createElement(O,null)),r.a.createElement(\"br\",null),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{className:s()(\"button success\",{disabled:!e}),onClick:this.onClaimBalance.bind(this)},r.a.createElement(v.a,{content:\"wallet.claim_balance\"}),t),r.a.createElement(\"div\",{className:\"button cancel\",onClick:this.onBack.bind(this)},r.a.createElement(v.a,{content:\"wallet.cancel\"})))}},{key:\"onBack\",value:function(e){e.preventDefault(),window.history.back()}},{key:\"onClaimAccountChange\",value:function(e){_.a.claimAccountChange(e)}},{key:\"onClaimBalance\",value:function(){C.a.importBalance(this.props.claim_account_name,this.props.selected_balances,!0).catch((function(e){console.error(\"claimBalance\",e);var t=e;try{t=e.data.message}catch(e){}throw z.Notification.error({message:p.a.translate(\"notifications.balance_claim_error\",{error_msg:t})}),e}))}}]),t}(a.Component);q=Object(o.a)(q,{listenTo:function(){return[y.a,h.a,m.a]},getProps:function(){var e=y.a.getState();return e.account_refs=h.a.getAccountRefs(),e}});t.a=q},2090:function(e,t,n){\"use strict\";var a=n(0),r=n.n(a),o=n(30),i=n(3),c=n.n(i),l=n(6),s=n(675),u=n(15),p=n(108),f=n(47),m=n(605),h=n(41),y=n(2),_=n.n(y),d=n(5),b=n.n(d),v=n(2071),g=n(411),k=n(599),E=n(35),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function O(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function C(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var S=function(e){function t(){return O(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),w(t,[{key:\"render\",value:function(){if(void 0===this.props.balances)return r.a.createElement(\"div\",null,r.a.createElement(_.a,{content:\"wallet.loading_balances\"}),\"â€¦\");var e=this.props.balances.groupBy((function(e){return e.balance.asset_id})).map((function(e){return e.reduce((function(e,t){return e+Number(t.balance.amount)}),0)}));return e.size?r.a.createElement(\"div\",null,e.map((function(e,t){return r.a.createElement(\"div\",{key:t},r.a.createElement(E.a,{color:\"info\",amount:e,asset:t}))})).toArray()):r.a.createElement(\"div\",null,\"None\")}}]),t}(a.Component),j=S=Object(o.a)(S,{listenTo:function(){return[k.a]},getProps:function(){return k.a.getState()}}),x=n(20),P=n(33),A=n(100),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var T=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e._export(\"importing\"),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),N(t,[{key:\"_getInitialState\",value:function(){return{importing:!1}}},{key:\"importing\",value:function(e){this.setState({importing:e})}}]),t}(A.a),B=P.a.createStore(T,\"ImportKeysStore\"),I=n(4),K=n(2312),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(2314);var z=function(e){var t=e.key_count;return t?r.a.createElement(\"span\",null,\"Found \",t,\" private keys\"):r.a.createElement(\"span\",null)},M=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e._renderBalanceClaims=e._renderBalanceClaims.bind(e),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),R(t,[{key:\"_getInitialState\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{keys_to_account:{},no_file:!0,account_keys:[],reset_file_name:e?this.state.reset_file_name:Date.now(),reset_password:Date.now(),password_checksum:null,import_file_message:null,import_password_message:null,imported_keys_public:{},key_text_message:null,associatedAccount:null,errorTextMessage:null,genesis_filtering:!1,genesis_filter_status:[],genesis_filter_finished:void 0,importSuccess:!1}}},{key:\"reset\",value:function(e,t){var n=this;e&&e.preventDefault();var a=this._getInitialState(t);this.setState(a,(function(){return n.updateOnChange()}))}},{key:\"onWif\",value:function(e){e.preventDefault();var t=this.refs.wifInput.state.value;this.addByPattern(t)}},{key:\"onCancel\",value:function(e){e&&e.preventDefault(),this.setState(this._getInitialState())}},{key:\"updateOnChange\",value:function(){g.a.setPubkeys(Object.keys(this.state.imported_keys_public))}},{key:\"getImportAccountKeyCount\",value:function(e){var t={},n=!1;for(var a in e){var r=!0,o=!1,i=void 0;try{for(var c,l=e[a].account_names[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value;t[s]=(t[s]||0)+1,n=!0}}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}}return n?t:null}},{key:\"upload\",value:function(e){var t=this;this.reset(null,!0);var n=e.target.files[0],a=new FileReader;a.onload=function(e){var a=e.target.result;try{var r=void 0;try{r=JSON.parse(a),t._parseImportKeyUpload(r,n.name,(function(e){t.setState(e,(function(){e.genesis_filter_finished&&t._passwordCheck()}))}))}catch(e){try{r||n.name,t._parseWalletJson(r)}catch(e){if(!t.addByPattern(a))throw e}t._passwordCheck()}}catch(e){console.error(\"... ImportKeys upload error\",e),t.setState({import_file_message:e})}},a.readAsText(n)}},{key:\"_parseImportKeyUpload\",value:function(e,t,n){var a=this,r=void 0,o=void 0;try{if(!(r=e.password_checksum))throw t+\" is an unrecognized format\";if(!Array.isArray(e.account_keys))throw t+\" is an unrecognized format\";o=e.account_keys}catch(e){throw e.message||e}var i=new K.a;i.isAvailable()?this.setState({genesis_filter_initalizing:!0},(function(){return i.init((function(){var e=a.state.genesis_filter_status,t=o;i.filter(t,(function(a){if(\"missing_public_keys\"===a.error)return console.error(\"un-released format, just for testing\"),void n({password_checksum:r,account_keys:o,genesis_filter_finished:!0,genesis_filtering:!1});if(a.success)n({password_checksum:r,account_keys:t,genesis_filter_finished:!0,genesis_filtering:!1});else if(void 0===a.initalizing)if(void 0!==a.importing){if(e.length)e[e.length-1].account_name===a.account_name?e[e.length-1]=a:e.push(a);else e.push(a);n({genesis_filter_status:e})}else console.error(\"unknown status\",a);else n({genesis_filter_initalizing:a.initalizing,genesis_filtering:!0})}))}))})):n({password_checksum:r,account_keys:o,genesis_filter_finished:!0,genesis_filtering:!1})}},{key:\"_parseWalletJson\",value:function(e){var t=void 0,n=void 0,a={},r={},o=function(e,t){e=u.ChainConfig.address_prefix+e.substring(3);var n=l.PublicKey.fromPublicKeyString(e).toAddressString(),a=r[t]||[];n=\"BTS\"+n.substring(3),a.push(n),r[t]=a};try{if(!Array.isArray(e))throw new Error(\"Invalid wallet format\");var i=!0,c=!1,s=void 0;try{for(var p,f=e[Symbol.iterator]();!(i=(p=f.next()).done);i=!0){var m=p.value;if(\"key_record_type\"==m.type&&m.data.account_address&&m.data.encrypted_private_key){var h=m.data.account_address,y=a[h]||[];y.push(m.data.encrypted_private_key),a[h]=y}else if(\"account_record_type\"!=m.type)if(\"property_record_type\"!=m.type||\"encrypted_brainkey\"!=m.data.key){if(\"master_key_record_type\"==m.type){if(!m.data)throw file.name+\" invalid master_key_record record\";if(!m.data.checksum)throw file.name+\" is missing master_key_record checksum\";t=m.data.checksum}}else n=m.data.value;else{var _=m.data.name;o(m.data.owner_key,_);var d=!0,b=!1,v=void 0;try{for(var g,k=m.data.active_key_history[Symbol.iterator]();!(d=(g=k.next()).done);d=!0){o(g.value[1],_)}}catch(e){b=!0,v=e}finally{try{!d&&k.return&&k.return()}finally{if(b)throw v}}}}}catch(e){c=!0,s=e}finally{try{!i&&f.return&&f.return()}finally{if(c)throw s}}if(!n)throw\"Please use a BTS 1.0 wallet_export_keys file instead\";if(!t)throw file.name+\" is missing password_checksum\";if(!enckeys.length)throw file.name+\" does not contain any private keys\"}catch(e){throw e.message||e}var E=[];for(var w in r){var O=[],C=!0,S=!1,j=void 0;try{for(var x,P=r[w][Symbol.iterator]();!(C=(x=P.next()).done);C=!0){var A=a[x.value];if(A){var N=!0,T=!1,B=void 0;try{for(var I,K=A[Symbol.iterator]();!(N=(I=K.next()).done);N=!0){var R=I.value;O.push(R)}}catch(e){T=!0,B=e}finally{try{!N&&K.return&&K.return()}finally{if(T)throw B}}}}}catch(e){S=!0,j=e}finally{try{!C&&P.return&&P.return()}finally{if(S)throw j}}E.push({account_name:w,encrypted_private_keys:O})}this.setState({password_checksum:t,account_keys:E})}},{key:\"_passwordCheck\",value:function(e){var t=this;e&&\"preventDefault\"in e&&e.preventDefault();var n=this.refs.password,a=n?n.value:\"\";if(this.state.password_checksum!=l.hash.sha512(l.hash.sha512(a)).toString(\"hex\"))return this.setState({no_file:!1,import_password_message:a.length?\"Incorrect password\":null});this.setState({no_file:!1,reset_password:Date.now(),import_password_message:b.a.translate(\"wallet.import_pass_match\")},(function(){return t._decryptPrivateKeys(a)}))}},{key:\"_decryptPrivateKeys\",value:function(e){var t=this,n=l.Aes.fromSeed(e),a=!0,r=!0,o=!1,i=void 0;try{for(var c,s=this.state.account_keys[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var p=c.value;if(p.encrypted_private_keys)for(var f=p.account_name.trim(),m=new RegExp(\"^\"+u.ChainConfig.address_prefix),h=0;h<p.encrypted_private_keys.length;h++){var y=p.encrypted_private_keys[h],_=p.public_keys?p.public_keys[h]:null;try{var d=n.decryptHex(y);if(_)m.test(_)||(_=u.ChainConfig.address_prefix+_.substring(3));else _=l.PrivateKey.fromHex(d).toPublicKey().toPublicKeyString();this.state.imported_keys_public[_]=!0;var v=(this.state.keys_to_account[d]||{account_names:[]}).account_names,g=!1,k=!0,E=!1,w=void 0;try{for(var O,C=v[Symbol.iterator]();!(k=(O=C.next()).done);k=!0){O.value==f&&(g=!0)}}catch(e){E=!0,w=e}finally{try{!k&&C.return&&C.return()}finally{if(E)throw w}}if(g)continue;v.push(f),this.state.keys_to_account[d]={account_names:v,public_key_string:_}}catch(e){console.log(e,e.stack);var S=e.message||e;I.Notification.error({message:b.a.translate(\"notifications.import_keys_error\",{account_name:f,error_msg:S})})}}else{var j=\"Account \"+p.account_name+\" missing encrypted_private_keys\";console.error(j),a&&(I.Notification.error({message:j}),a=!1)}}}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}this.setState({import_file_message:null,import_password_message:null,password_checksum:null},(function(){return t.updateOnChange()}))}},{key:\"_saveImport\",value:function(e){var t=this;e.preventDefault();var n=p.a.getState().keys,a={};for(var r in this.state.imported_keys_public)n.has(r)&&(delete this.state.imported_keys_public[r],a[r]=!0);if(0!==Object.keys(this.state.imported_keys_public).length){var o=this.state.keys_to_account,i=!0,c=!1,l=void 0;try{for(var s,u=Object.keys(o)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var m=s.value,h=o[m];h.account_names;a[h.public_key_string]&&delete o[m]}}catch(e){c=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(c)throw l}}f.a.unlock().then((function(){B.importing(!0),setTimeout((function(){return t.saveImport()}),200)})).catch((function(){}))}else I.Notification.error({message:b.a.translate(\"notifications.import_keys_already_imported\")})}},{key:\"saveImport\",value:function(){var e=this,t=this.state.keys_to_account,n=[],a=!0,r=!1,o=void 0;try{for(var i,c=Object.keys(t)[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value,s=t[l],u=s.account_names,p=s.public_key_string;n.push({private_plainhex:l,import_account_names:u,public_key_string:p})}}catch(e){r=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw o}}this.reset(),x.a.importKeysWorker(n).then((function(t){B.importing(!1);var a=n.length;I.Notification.success({message:b.a.translate(\"wallet.import_key_success\",{count:a})}),e.setState({importSuccess:!0})})).catch((function(e){console.log(\"error:\",e),B.importing(!1);var t=e;try{t=e.target.error.message}catch(e){}I.Notification.error({message:b.a.translate(\"notifications.import_keys_error_unknown\",{error_msg:t})})}))}},{key:\"addByPattern\",value:function(e){var t=this;if(!e)return this.setState({errorTextMessage:b.a.translate(\"wallet.wif_import_error\")}),!1;if(51!==e.length)return this.setState({errorTextMessage:b.a.translate(\"wallet.wif_length_error\")}),!1;var n=0,a=0,r=!0,o=!1,i=void 0;try{for(var c,u=(e.match(/5[HJK][1-9A-Za-z]{49}/g)||[])[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var p=c.value;try{!function(){var e=l.PrivateKey.fromWif(p),a=e.toBuffer().toString(\"hex\"),r=e.toPublicKey().toPublicKeyString();t.state.imported_keys_public[r]=!0,t.state.keys_to_account[a]={account_names:[],public_key_string:r};var o,i,c=[];s.a.lookupAccountByPublicKey(r).then((o=regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[0].map((function(e){return Object(l.FetchChain)(\"getAccount\",e)})),e.next=4,Promise.all(a);case 4:e.sent.map((function(e){var t=e.get(\"name\");-1===c.indexOf(t)&&c.push(t)})),t.setState({associatedAccount:c});case 7:case\"end\":return e.stop()}}),e,t)})),i=function(){var e=o.apply(this,arguments);return new Promise((function(t,n){return function a(r,o){try{var i=e[r](o),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then((function(e){a(\"next\",e)}),(function(e){a(\"throw\",e)}));t(c)}(\"next\")}))},function(e){return i.apply(this,arguments)})),n++}()}catch(e){a++}}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.setState({key_text_message:\"Found \"+(n?n+\" valid\":\"\")+(a?\" and \"+a+\" invalid\":\"\")+\" key\"+(n>1||a>1?\"s\":\"\")+\".\"},(function(){return t.updateOnChange()})),this.setState({key_text_message:null,errorTextMessage:null}),n}},{key:\"_renderBalanceClaims\",value:function(){return r.a.createElement(\"div\",null,r.a.createElement(v.a,null),r.a.createElement(\"div\",{style:{paddingTop:15}},r.a.createElement(I.Button,{type:\"primary\",onClick:this.onCancel.bind(this)},r.a.createElement(_.a,{content:\"wallet.done\"}))))}},{key:\"render\",value:function(){var e=this,t=this.props.privateKey,n=this.state.keys_to_account,a=Object.keys(n).length,o=this.getImportAccountKeyCount(n);if(!x.a.getWallet())return r.a.createElement(m.b,{importKeys:!0,hideTitle:!0});if(this.props.importing)return r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:\"center-content\"},r.a.createElement(h.a,{type:\"circle\"})));var i=this.state.genesis_filtering,l=(!!this.state.genesis_filter_status.length&&this.state.genesis_filter_finished,null);if(this.state.genesis_filter_status.length){l=[];var s=!0,u=!1,p=void 0;try{for(var f,y=this.state.genesis_filter_status[Symbol.iterator]();!(s=(f=y.next()).done);s=!0){var d=f.value;d.count&&d.total&&l.push(r.a.createElement(\"tr\",{key:d.account_name},r.a.createElement(\"td\",null,d.account_name),r.a.createElement(\"td\",null,i?r.a.createElement(\"span\",null,\"Filtering\",\" \",Math.round(d.count/d.total*100),\" \",\"%\",\" \"):r.a.createElement(\"span\",null,d.count))))}}catch(e){u=!0,p=e}finally{try{!s&&y.return&&y.return()}finally{if(u)throw p}}}var v=0!==a,g=b.a.translate(\"wallet.import_password\");if(v&&(g=\"\"),!l&&o)for(var k in l=[],o)l.push(r.a.createElement(\"tr\",{key:k},r.a.createElement(\"td\",null,k),r.a.createElement(\"td\",null,o[k])));var E=r.a.createElement(I.Button,{onClick:this.onCancel.bind(this)},r.a.createElement(_.a,{content:\"wallet.cancel\"})),w=1;return this.state.importSuccess?this._renderBalanceClaims():r.a.createElement(\"div\",null,r.a.createElement(\"div\",{style:{padding:\"10px 0\"}},r.a.createElement(\"span\",null,this.state.key_text_message?this.state.key_text_message:r.a.createElement(z,{key_count:a})),v?r.a.createElement(\"span\",null,\" \",\"(\",r.a.createElement(\"a\",{onClick:this.reset.bind(this)},r.a.createElement(_.a,{content:\"wallet.reset\"})),\")\"):null,r.a.createElement(\"span\",null,r.a.createElement(\"br\",null),this.state.associatedAccount&&r.a.createElement(\"div\",null,r.a.createElement(_.a,{content:\"wallet.wif_associated_accounts\"}),this.state.associatedAccount.map((function(e,t){return r.a.createElement(\"p\",{key:t},e)}))))),l?r.a.createElement(\"div\",null,l.length?r.a.createElement(\"div\",null,r.a.createElement(\"table\",{className:\"table\"},r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,r.a.createElement(_.a,{content:\"explorer.account.title\"})),r.a.createElement(\"th\",null,r.a.createElement(_.a,{content:\"settings.restore_key_count\"})))),r.a.createElement(\"tbody\",null,l)),r.a.createElement(\"br\",null)):b.a.translate(\"wallet.no_accounts\")):null,r.a.createElement(\"br\",null),v||this.state.genesis_filter_initalizing?null:r.a.createElement(\"div\",null,r.a.createElement(\"div\",null,r.a.createElement(\"div\",null,t?r.a.createElement(\"form\",{onSubmit:this.onWif.bind(this)},r.a.createElement(_.a,{component:\"label\",content:\"wallet.paste_private\"}),r.a.createElement(I.Input,{ref:\"wifInput\",type:\"password\",id:\"wif\",tabIndex:w++,style:{marginBottom:\"16px\"}}),r.a.createElement(\"div\",{className:\"importError\"},r.a.createElement(\"span\",{className:\"red\"},this.state.errorTextMessage)),r.a.createElement(I.Button,{type:\"primary\",htmlType:\"submit\",style:{marginRight:\"16px\"}},r.a.createElement(_.a,{content:\"wallet.submit\"})),E):r.a.createElement(\"form\",{onSubmit:this._passwordCheck.bind(this)},r.a.createElement(\"label\",null,r.a.createElement(_.a,{content:\"wallet.bts_09_export\"}),this.state.no_file?null:r.a.createElement(\"span\",null,\"Â  (\",r.a.createElement(\"a\",{onClick:this.reset.bind(this)},\"Reset\"),\")\")),r.a.createElement(\"input\",{type:\"file\",id:\"file_input\",accept:\".json\",style:{border:\"solid\",marginBottom:15},key:this.state.reset_file_name,onChange:this.upload.bind(this)}),r.a.createElement(\"div\",null,this.state.import_file_message),this.state.no_file?null:r.a.createElement(\"div\",null,r.a.createElement(I.Input,{type:\"password\",ref:\"password\",key:this.state.reset_password,placeholder:g,onChange:function(){e.state.import_password_message&&e.state.import_password_message.length&&e.setState({import_password_message:null})}}),r.a.createElement(\"p\",{className:\"facolor-error\"},this.state.import_password_message)),r.a.createElement(\"div\",{className:\"button-group\"},r.a.createElement(I.Button,{type:\"primary\",disabled:!!this.state.no_file,htmlType:\"submit\",style:{marginRight:\"16px\"}},r.a.createElement(_.a,{content:\"wallet.submit\"})),E))),r.a.createElement(\"br\",null),r.a.createElement(\"br\",null))),this.state.genesis_filter_initalizing?r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:\"center-content\"},r.a.createElement(h.a,{type:\"circle\"}))):null,v?r.a.createElement(\"div\",null,r.a.createElement(\"div\",null,r.a.createElement(\"div\",{className:\"button-group\"},r.a.createElement(\"div\",{className:c()(\"button success\",{disabled:!v}),onClick:this._saveImport.bind(this)},r.a.createElement(_.a,{content:\"wallet.import_keys\"})),r.a.createElement(\"div\",{className:\"button secondary\",onClick:this.reset.bind(this)},r.a.createElement(_.a,{content:\"wallet.cancel\"})))),r.a.createElement(\"h4\",null,r.a.createElement(_.a,{content:\"wallet.unclaimed\"})),r.a.createElement(_.a,{component:\"p\",content:\"wallet.claim_later\"}),r.a.createElement(\"div\",{className:\"grid-block\"},r.a.createElement(\"div\",{className:\"grid-content no-overflow\"},r.a.createElement(_.a,{component:\"label\",content:\"wallet.totals\"}),r.a.createElement(j,null))),r.a.createElement(\"br\",null)):null)}}]),t}(a.Component);M.defaultProps={privateKey:!0},M=Object(o.a)(M,{listenTo:function(){return[B]},getProps:function(){return{importing:B.getState().importing}}});t.a=M},2312:function(t,n,a){\"use strict\";(function(t){var r=a(6),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=void 0;try{var c=a(2313);if(-1===c.indexOf(\"3cee441\"))throw new Error(\"Incorrect hash: bts_genesiskeys_bloom.dat\");i=c}catch(e){console.log(\"WARN: Will be unable to filter BTS 1.0 wallet imports, did not find assets/bts_genesiskeys_bloom.dat\",e)}var l=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,n),e&&(this.bloom_buffer=e,this.bits_in_filter=8*e.length)}return o(n,[{key:\"isAvailable\",value:function(){return void 0!==i}},{key:\"init\",value:function(n){var a=this;if(this.bloom_buffer)n();else{if(!this.isAvailable())throw new Error(\"Genesis bloom file was not deployed\");var r=new XMLHttpRequest;r.responseType=\"blob\",r.onload=function(){if(404!==r.status){var e=new FileReader;e.onload=function(e){var r=new t(e.target.result,\"binary\");if(1048576!==r.length)throw new Error(\"Wrong length\");a.bits_in_filter=8*r.length,a.bloom_buffer=r,n()},e.readAsBinaryString(r.response)}},r.onerror=function(){console.error(\"xhr.onerror\",e)},r.open(\"GET\",i),r.send()}}},{key:\"inGenesis\",value:function(e){if(!this.bloom_buffer)throw new Error(\"Call init() first\");for(var t=0;t<3;t++){var n=r.hash.sha256(t+\":\"+e),a=parseInt(n.slice(-3).toString(\"hex\"),16)%this.bits_in_filter,o=a>>3,i=1<<(7&a);if(0==(this.bloom_buffer[o]&i))return!1}return!0}},{key:\"filter\",value:function(e,t){var n=this;if(!this.isAvailable())return console.log(\"WARN: Missing bloom filter for BTS 0.9.x wallets\"),void t({error:\"missing_bloom\"});var a=!0;t({initalizing:a}),this.init((function(){try{t({initalizing:a=!1});for(var o=1,i=0;i<e.length;i++){var c=0,l=0,s=e[i],u=s.encrypted_private_keys.length;t({importing:!0,account_name:s.account_name,count:l,total:u});for(var p=s.encrypted_private_keys.length-1;p>=0;p--){if(++l%o==0&&(o=47,t({importing:!0,account_name:s.account_name,count:l,total:u})),!s.public_keys)return void t({error:\"missing_public_keys\"});var f=s.public_keys[p];if(/^GPH/.test(f)&&(f=\"BTS\"+f.substring(3)),!n.inGenesis(f)){for(var m=r.key.addresses(f,\"BTS\"),h=!1,y=0;y<m.length;y++)if(n.inGenesis(m[y])){h=!0;break}h||(delete s.encrypted_private_keys[p],delete s.public_keys[p],c++)}}var _=[],d=[];for(p=s.encrypted_private_keys.length-1;p>=0;p--)s.encrypted_private_keys[p]&&(_.push(s.encrypted_private_keys[p]),d.push(s.public_keys[p]));s.encrypted_private_keys=_,t({importing:!1,account_name:s.account_name,count:l-c,total:u}),s.public_keys=d}t({success:!0})}finally{a&&t({initalizing:a=!1})}}))}}]),n}();n.a=l}).call(this,a(126).Buffer)},2313:function(e,t,n){e.exports=n.p+\"bts_genesiskeys_bloom_3cee441.dat\"},2314:function(e,t,n){},2321:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"ExistingAccountOptions\",(function(){return de}));var a=n(0),r=n.n(a),o=n(102),i=n(30),c=n(85),l=n(2071),s=n(2),u=n.n(s),p=n(2022),f=n(2020),m=n(618),h=n(9),y=n.n(h),_=n(3),d=n.n(_),b=n(33),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return v(e,[{key:\"setBrainkey\",value:function(e){return e}}]),e}(),k=b.a.createActions(g),E=n(6),w=n(100),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function C(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var S=function(){function e(){C(this,e)}return O(e,null,[{key:\"getInstance\",value:function(t){var n=e.instances.get(t);n||(n=b.a.createStore(x,\"BrainkeyStore\"),e.instances.set(t,n));var a=t+\" subscribed_instance\";if(!e.instances.get(a)){var r=n.chainStoreUpdate.bind(n);E.ChainStore.subscribe(r),e.instances.set(a,r)}return n}},{key:\"closeInstance\",value:function(t){var n=e.instances.get(t);if(!n)throw new Error(\"unknown instance \"+t);var a=t+\" subscribed_instance\",r=e.instances.get(a);e.instances.delete(a),E.ChainStore.unsubscribe(r),n.clearCache()}}]),e}();S.instances=new Map;var j=S,x=function(e){function t(){C(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.clearCache(),e.bindListeners({onSetBrainkey:k.setBrainkey}),e._export(\"inSync\",\"chainStoreUpdate\",\"clearCache\"),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),O(t,[{key:\"clearCache\",value:function(){this.state={brnkey:\"\",account_ids:y.a.Set()},this.derived_keys=new Array,this.account_ids_by_key=null}},{key:\"onSetBrainkey\",value:function(e){this.clearCache(),this.setState({brnkey:e}),this.deriveKeys(e),this.chainStoreUpdate()}},{key:\"inSync\",value:function(){return this.derived_keys.forEach((function(e){if(N(e))return!1})),!0}},{key:\"chainStoreUpdate\",value:function(){this.derived_keys.length&&this.account_ids_by_key!==E.ChainStore.account_ids_by_key&&(this.account_ids_by_key=E.ChainStore.account_ids_by_key,this.updateAccountIds())}},{key:\"deriveKeys\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.brnkey,t=this.derived_keys.length,n=E.key.get_brainPrivateKey(e,t),a=P(n);this.derived_keys.push(a),this.derived_keys.length<10&&this.deriveKeys(e)}},{key:\"updateAccountIds\",value:function(){var e=this,t=y.a.Set().withMutations((function(t){e.derived_keys.forEach((function(e){return n=e.public_string,void((a=E.ChainStore.getAccountRefsOfKey(n))&&a.forEach((function(e){t.add(e)})));var n,a}))}));t.equals(this.state.account_ids)||(this.state.account_ids=t,this.setState({account_ids:t}))}}]),t}(w.a);function P(e){var t=e.toPublicKey().toPublicKeyString();return{private_key:e,public_string:t}}var A,N=function(e){return void 0===E.ChainStore.getAccountRefsOfKey(e.public_string)},T=n(48),B=n(44),I=n(1),K=n.n(I),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function z(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function M(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function W(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var D=function(e){function t(){z(this,t);var e=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={brnkey:\"\",loading:!0},e}return W(t,e),R(t,[{key:\"componentWillMount\",value:function(){var e=this;fetch(\"dictionary.json\").then((function(t){return t.json().then((function(t){A=new Set(t.en.split(\",\")),e.setState({loading:!1})}))})).catch((function(e){console.log(\"fetch dictionary error:\",e)}))}},{key:\"_checkBrainKey\",value:function(){var e=this.state.brnkey.split(\" \"),t=[];e.forEach((function(e,n){if(\"\"!==e){var a=e.toLowerCase();null===(a=a.match(/[a-z]+/))||A.has(a[0])?t.push(r.a.createElement(\"span\",{key:n,style:{padding:\"1px\",margin:\"1px\"}},e)):t.push(r.a.createElement(L,{key:n},e))}}));var n=void 0,a=!0,o=!0;return t.length>0&&(this.state.brnkey.length<50?(n=this.state.brnkey.length+\" characters (50 minimum)\",o=!1):t.length<16?n=t.length+\" words (16 recommended)\":(n=t.length+\" words\",a=!1)),{warn:a,valid:o,word_count_label:n,checked_words:t}}},{key:\"render\",value:function(){if(this.state.loading||!A)return r.a.createElement(\"div\",{style:{padding:20}},\"Fetching dictionary....\");var e=this._checkBrainKey(),t=e.warn,n=e.word_count_label,a=e.checked_words;return r.a.createElement(\"span\",{className:\"\"},r.a.createElement(\"div\",null,r.a.createElement(\"textarea\",{tabIndex:this.props.tabIndex||1,onChange:this.formChange.bind(this),value:this.state.brnkey,id:\"brnkey\",style:{height:100,minWidth:450}}),r.a.createElement(\"div\",{style:{textAlign:\"left\"},className:\"grid-content no-padding no-overflow\"},a),this.state.check_digits&&!this.props.hideCheckDigits?r.a.createElement(\"div\",null,r.a.createElement(\"br\",null),r.a.createElement(\"pre\",{className:\"no-overflow\"},this.state.check_digits,\" * Check Digits\"),r.a.createElement(\"br\",null)):null,r.a.createElement(\"p\",null,r.a.createElement(\"i\",{className:d()({error:t})},n))))}},{key:\"formChange\",value:function(e){var t=e.target,n=t.id,a=t.value,r=this._checkBrainKey().valid,o={};if(o[n]=a,\"brnkey\"===n){var i=E.key.normalize_brainKey(a);this.props.onChange(i.length<50?null:i),o.check_digits=i.length<50?null:E.hash.sha1(i).toString(\"hex\").substring(0,4)}this.setState(o),this.props.errorCallback&&this.props.errorCallback(r)}}]),t}(a.Component);D.propTypes={onChange:K.a.func.isRequired};var q=D,L=function(e){function t(){return z(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return W(t,e),R(t,[{key:\"render\",value:function(){return r.a.createElement(\"span\",{style:{borderBottom:\"1px dotted #ff0000\",padding:\"1px\",margin:\"1px\"}},r.a.createElement(\"span\",{style:{borderBottom:\"1px dotted #ff0000\"}},this.props.children))}}]),t}(a.Component),F=n(371),U=n(376),G=n(23),J=n(885),H=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function X(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Y(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var Z=function(e){function t(){return X(this,t),Y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),H(t,[{key:\"onCardClick\",value:function(e){e.preventDefault();var t=this.props.account.get(\"name\");this.props.history.push(\"/account/\"+t)}},{key:\"render\",value:function(){var e=null,t=null,n=!1;if(this.props.account){e=this.props.account.get(\"name\");var a=this.props.account.get(\"balances\");a&&(t=a.map((function(e){return E.ChainStore.getObject(e).get(\"balance\")?r.a.createElement(\"li\",{key:e},r.a.createElement(F.a,{balance:e})):null})).toArray()),n=G.a.isMyAccount(this.props.account)}return r.a.createElement(\"div\",{className:\"grid-content account-card\",onClick:this.onCardClick.bind(this)},r.a.createElement(\"div\",{className:\"card\"+(n?\" my-account\":\"\")},r.a.createElement(\"h4\",{className:\"text-center\"},e),r.a.createElement(\"div\",{className:\"card-content clearfix\"},r.a.createElement(\"div\",{className:\"float-left\"},r.a.createElement(U.a,{account:e,size:{height:64,width:64}})),r.a.createElement(\"ul\",{className:\"balances\"},t))))}}]),t}(r.a.Component);Z.propTypes={account:B.a.ChainAccount.isRequired},Z=Object(T.a)(Z);var Q=Object(J.a)(Z),V=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function $(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ee(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function te(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ne={listenTo:function(){return[j.getInstance(\"wmc\")]},getProps:function(){return j.getInstance(\"wmc\").getState()}},ae=function(e){function t(){return $(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return te(t,e),V(t,[{key:\"componentWillUnmount\",value:function(){j.closeInstance(\"wmc\")}},{key:\"render\",value:function(){return r.a.createElement(\"span\",null,r.a.createElement(\"h3\",null,r.a.createElement(u.a,{content:\"wallet.brainkey\"})),r.a.createElement(ce,null,r.a.createElement(oe,null)))}}]),t}(a.Component),re=ae=Object(i.a)(ae,ne),oe=function(e){function t(){return $(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return te(t,e),V(t,[{key:\"render\",value:function(){var e=this.props.brnkey.substring(0,10);return r.a.createElement(\"span\",null,r.a.createElement(\"div\",null,r.a.createElement(\"span\",{className:\"\"},e),\"â€¦\"),r.a.createElement(\"p\",null),this.props.account_ids.size?r.a.createElement(ie,{accounts:y.a.List(this.props.account_ids.toArray())}):r.a.createElement(\"h5\",null,r.a.createElement(u.a,{content:\"wallet.no_accounts\"})))}}]),t}(a.Component);oe=Object(i.a)(oe,ne);var ie=function(e){function t(){return $(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return te(t,e),V(t,[{key:\"render\",value:function(){var e=Object(m.a)(this.props.accounts).filter((function(e){return!!e[1]})).map((function(e){return e[1].get(\"name\")})).sort().map((function(e){return r.a.createElement(Q,{key:e,account:e})}));return r.a.createElement(\"span\",null,e)}}]),t}(r.a.Component);ie.propTypes={accounts:B.a.ChainAccountsList.isRequired},ie=Object(T.a)(ie);var ce=function(e){function t(){$(this,t);var e=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={brnkey:\"\",accept:!1},e}return te(t,e),V(t,[{key:\"render\",value:function(){if(this.state.accept)return r.a.createElement(\"span\",null,this.props.children);var e=this.state.brnkey&&\"\"!==this.state.brnkey;return r.a.createElement(\"span\",{className:\"grid-container\"},r.a.createElement(\"div\",null,r.a.createElement(q,{onChange:this.onBrainkeyChange.bind(this)})),r.a.createElement(\"div\",{className:d()(\"button success\",{disabled:!e}),onClick:this.onAccept.bind(this)},r.a.createElement(u.a,{content:\"wallet.accept\"})))}},{key:\"onBrainkeyChange\",value:function(e){this.setState({brnkey:e})}},{key:\"onAccept\",value:function(){this.setState({accept:!0}),k.setBrainkey(this.state.brnkey)}}]),t}(a.Component),le=n(2090),se=n(374),ue=n(36),pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function fe(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function me(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function he(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ye={listenTo:function(){return[c.a]},getProps:function(){return{wallet:c.a.getState()}}},_e=function(e){function t(){return fe(this,t),me(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return he(t,e),pe(t,[{key:\"render\",value:function(){var e=0!=this.props.wallet.wallet_names.count();return r.a.createElement(\"div\",{className:\"grid-container\"},r.a.createElement(\"div\",{className:\"grid-content\"},r.a.createElement(\"div\",{className:\"content-block center-content\"},r.a.createElement(\"div\",{className:\"page-header\"},r.a.createElement(\"h1\",null,r.a.createElement(u.a,{content:\"account.welcome\",wallet_name:Object(ue.p)()})),e?r.a.createElement(\"h3\",null,r.a.createElement(u.a,{content:\"wallet.setup_wallet\"})):r.a.createElement(\"h3\",null,r.a.createElement(u.a,{content:\"wallet.create_wallet_backup\"}))),r.a.createElement(\"div\",{className:\"content-block\"},r.a.createElement(p.a,null,r.a.createElement(f.a,{exact:!0,path:\"/existing-account\",component:se.b}),r.a.createElement(f.a,{exact:!0,path:\"/existing-account/import-backup\",component:de}),r.a.createElement(f.a,{exact:!0,path:\"/existing-account/import-keys\",component:le.a}),r.a.createElement(f.a,{exact:!0,path:\"/existing-account/brainkey\",component:re}),r.a.createElement(f.a,{exact:!0,path:\"/existing-account/balance-claim\",component:l.a})),this.props.children))))}}]),t}(a.Component);_e=Object(i.a)(_e,ye);var de=function(e){function t(){return fe(this,t),me(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return he(t,e),pe(t,[{key:\"render\",value:function(){var e=0!=this.props.wallet.wallet_names.count();return r.a.createElement(\"span\",null,e?null:r.a.createElement(\"div\",null,r.a.createElement(o.a,{to:\"existing-account/import-backup\"},r.a.createElement(u.a,{content:\"wallet.import_backup\",wallet_name:Object(ue.p)()})),r.a.createElement(\"br\",null),r.a.createElement(\"br\",null),r.a.createElement(o.a,{to:\"existing-account/import-keys\"},r.a.createElement(u.a,{content:\"wallet.import_bts1\"})),r.a.createElement(\"br\",null),r.a.createElement(\"br\",null),r.a.createElement(o.a,{to:\"existing-account/import-keys\"},r.a.createElement(u.a,{content:\"wallet.create_wallet\"})),r.a.createElement(\"br\",null),r.a.createElement(\"hr\",null)),e?r.a.createElement(l.a,null):null,e?r.a.createElement(\"span\",null,r.a.createElement(o.a,{to:\"dashboard\"},r.a.createElement(\"div\",{className:\"button outline\"},r.a.createElement(u.a,{component:\"span\",content:\"header.dashboard\"}))),r.a.createElement(o.a,{to:\"wallet\"},r.a.createElement(\"div\",{className:\"button outline\"},r.a.createElement(u.a,{content:\"settings.wallets\"})))):null)}}]),t}(a.Component);de=Object(i.a)(de,ye);t.default=_e}}]);"],"mappings":"AAAA","sourceRoot":""}